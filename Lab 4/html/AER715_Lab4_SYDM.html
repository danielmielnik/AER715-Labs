<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      -->
<title>AER715_Lab4_SYDM</title>
<meta name="generator" content="MATLAB 24.1">
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.date" content="2024-11-05">
<meta name="DC.source" content="AER715_Lab4_SYDM.m">
<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
</head>
<body>
<div class="content">
<h2>Contents</h2>
<div>
<ul>
<li>
<a href="#1">Lab Exercises &ndash;</a>
</li>
<li>
<a href="#2">Constants for Heli 4</a>
</li>
<li>
<a href="#3">Question 1</a>
</li>
<li>
<a href="#4">Question 2</a>
</li>
<li>
<a href="#5">Question 3</a>
</li>
<li>
<a href="#6">Question 4</a>
</li>
<li>
<a href="#7">Question 5</a>
</li>
<li>
<a href="#8">Question 6</a>
</li>
</ul>
</div>
<h2 id="1">Lab Exercises &ndash;</h2>
<pre class="codeinput">clc;
</pre>
<h2 id="2">Constants for Heli 4</h2>
<pre class="codeinput">Mh = 1.450; <span class="comment">% Mass of Heli Body (kg)</span>
Mc = 1.918; <span class="comment">% Mass of CW (kg)</span>
La = 25.75/39.37; <span class="comment">% Distance from Pivot to Helecopter body center (m)</span>
Lb = 18.5/39.37; <span class="comment">% Distance from Pivot to conterweight center (m)</span>
Lh = 6.933; <span class="comment">% Distance from pitch axis to rotor center (m)</span>
Kf = 0.140; <span class="comment">% Motor-Prop Force Constant (N/V)</span>
Krt = 0.0027; <span class="comment">% Motor-Prop Torque Constant (Nm/V)</span>
epsilon = -26:1:30; <span class="comment">% Elevation Range (Deg)</span>
epsilon_0 = -25.75; <span class="comment">% Elevation Start (Deg)</span>
lambda = 0:1:360; <span class="comment">% Travel Range (Deg)</span>
g = 9.81; <span class="comment">% Gravity constant (m/s^2)</span>
Wh = Mh*g; <span class="comment">% Weight of Heli Body (N)</span>
Wc = Mc*g; <span class="comment">% Weight of CW (N)</span>

Je = (Mh * La^2) + (Mc * Lb^2) <span class="comment">% Elevation Axis (kg-m^2)</span>

<span class="comment">% Open loop transfer function</span>
G4_elev1 = tf(La*Kf, [Je, 0, 0])
G4_elev2 = tf(0.0294, [1.0000, 0.1538, 1.3288])
G4_elev3 = tf(0.0911, [1.0000, 3.1682, 1.7900, 4.0932])
G4_trav = tf(0.002362, [1 0 0])

<span class="comment">% Closed loop transfer function</span>
T = tf(La*Kf, [Je, 0, 0] + La*Kf)

<span class="comment">% Load Sisotool data</span>
 sisotool(<span class="string">'SisoElev1.mat'</span>) <span class="comment">% originaly sisotool('rlocus', G4_elev1)</span>
 sisotool(<span class="string">'SisoElev2.mat'</span>) <span class="comment">% originaly sisotool('rlocus', G4_elev2)</span>
 sisotool(<span class="string">'SisoElev3.mat'</span>) <span class="comment">% originaly sisotool('rlocus', G4_elev3)</span>
 sisotool(<span class="string">'Trav.mat'</span>) <span class="comment">% originaly sisotool('rlocus', G4_trav)</span>
</pre>
<pre class="codeoutput">
Je =

    1.0438


G4_elev1 =
 
   0.09157
  ---------
  1.044 s^2
 
Continuous-time transfer function.

G4_elev2 =
 
          0.0294
  ----------------------
  s^2 + 0.1538 s + 1.329
 
Continuous-time transfer function.

G4_elev3 =
 
               0.0911
  --------------------------------
  s^3 + 3.168 s^2 + 1.79 s + 4.093
 
Continuous-time transfer function.

G4_trav =
 
  0.002362
  --------
    s^2
 
Continuous-time transfer function.

T =
 
              0.09157
  -------------------------------
  1.135 s^2 + 0.09157 s + 0.09157
 
Continuous-time transfer function.
</pre>
<h2 id="3">Question 1</h2>
<p>Root Locus and Step Response for Elevation 1</p>
<pre class="codeinput">figure(1)
image(imread(<span class="string">"Elev1RL.png"</span>))
axis <span class="string">off</span>

figure(2)
image(imread(<span class="string">"Elev1SR.png"</span>))
axis <span class="string">off</span>

<span class="comment">% Root Locus and Step Response for Elevation 2</span>
figure(3)
image(imread(<span class="string">"Elev2RL.png"</span>))
axis <span class="string">off</span>

figure(4)
image(imread(<span class="string">"Elev2SR.png"</span>))
axis <span class="string">off</span>

<span class="comment">% Root Locus and Step Response for Elevation 3</span>
figure(5)
image(imread(<span class="string">"Elev3RL.png"</span>))
axis <span class="string">off</span>

figure(6)
image(imread(<span class="string">"Elev3SR.png"</span>))
axis <span class="string">off</span>

figure(7)
image(imread(<span class="string">"TravRL.png"</span>))
axis <span class="string">off</span>

figure(8)
image(imread(<span class="string">"TravSR.png"</span>))
axis <span class="string">off</span>
</pre>
<img vspace="5" hspace="5" src="AER715_Lab4_SYDM_01.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_02.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_03.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_04.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_05.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_06.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_07.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_08.png" alt=""> <h2 id="4">Question 2</h2>
<p>Tranfer functions</p>
<pre class="codeinput">G4_elev1 = tf(La*Kf, [Je, 0, 0])
G4_elev2 = tf(0.0294, [1.0000, 0.1538, 1.3288])
G4_elev3 = tf(0.0911, [1.0000, 3.1682, 1.7900, 4.0932])
G4_trav = tf(0.002362, [1 0 0])

<span class="comment">% PID gain values of each tranfer function</span>
PID1 = pid(C1)
PID2 = pid(C2)
PID3 = pid(C3)
PID_Trav = pid(C_Trav)
</pre>
<pre class="codeoutput">
G4_elev1 =
 
   0.09157
  ---------
  1.044 s^2
 
Continuous-time transfer function.

G4_elev2 =
 
          0.0294
  ----------------------
  s^2 + 0.1538 s + 1.329
 
Continuous-time transfer function.

G4_elev3 =
 
               0.0911
  --------------------------------
  s^3 + 3.168 s^2 + 1.79 s + 4.093
 
Continuous-time transfer function.

G4_trav =
 
  0.002362
  --------
    s^2
 
Continuous-time transfer function.

PID1 =
 
             1          
  Kp + Ki * --- + Kd * s
             s          

  with Kp = 4.12, Ki = 0.539, Kd = 10.1
 
Name: C
Continuous-time PID controller in parallel form.

PID2 =
 
             1          
  Kp + Ki * --- + Kd * s
             s          

  with Kp = 11.6, Ki = 15.9, Kd = 69.3
 
Name: C
Continuous-time PID controller in parallel form.

PID3 =
 
             1          
  Kp + Ki * --- + Kd * s
             s          

  with Kp = 12.1, Ki = 19.3, Kd = 39.8
 
Name: C
Continuous-time PID controller in parallel form.

PID_Trav =
 
             1          
  Kp + Ki * --- + Kd * s
             s          

  with Kp = 351, Ki = 63.4, Kd = 540
 
Name: C
Continuous-time PID controller in parallel form.
</pre>
<h2 id="5">Question 3</h2>
<p>Comlete closed loop transfer function</p>
<pre class="codeinput">feedback_elev1 = feedback(G4_elev1*PID1, 1)
feedback_elev2 = feedback(G4_elev2*PID2, 1)
feedback_elev3 = feedback(G4_elev3*PID3, 1)
feedback_trav = feedback(G4_trav*PID_Trav, 1)
</pre>
<pre class="codeoutput">
feedback_elev1 =
 
        0.9218 s^2 + 0.3769 s + 0.04935
  -------------------------------------------
  1.044 s^3 + 0.9218 s^2 + 0.3769 s + 0.04935
 
Continuous-time transfer function.

feedback_elev2 =
 
     2.036 s^2 + 0.34 s + 0.4683
  ---------------------------------
  s^3 + 2.19 s^2 + 1.669 s + 0.4683
 
Continuous-time transfer function.

feedback_elev3 =
 
           3.623 s^2 + 1.106 s + 1.762
  ---------------------------------------------
  s^4 + 3.168 s^3 + 5.413 s^2 + 5.199 s + 1.762
 
Continuous-time transfer function.

feedback_trav =
 
     1.274 s^2 + 0.8292 s + 0.1499
  -----------------------------------
  s^3 + 1.274 s^2 + 0.8292 s + 0.1499
 
Continuous-time transfer function.
</pre>
<h2 id="6">Question 4</h2>
<p>Step response for elevation</p>
<pre class="codeinput">figure(9)
step(feedback_elev1, feedback_elev2, feedback_elev3)
title(<span class="string">'Step Response of Elevation'</span>)

<span class="comment">% Step response of travel</span>
figure(10)
step(feedback_trav)
title(<span class="string">'Step Response of Travel'</span>)
</pre>
<img vspace="5" hspace="5" src="AER715_Lab4_SYDM_09.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_10.png" alt=""> <h2 id="7">Question 5</h2>
<pre class="codeinput">fprintf(<span class="string">'Characteristic information of step response for elevation 1:'</span>)
stepinfo(feedback_elev1)

fprintf(<span class="string">'Characteristic information of step response for elevation 2:'</span>)
stepinfo(feedback_elev2)

fprintf(<span class="string">'Characteristic information of step response for elevation 3:'</span>)
stepinfo(feedback_elev3)
</pre>
<pre class="codeoutput">Characteristic information of step response for elevation 1:
ans = 

  struct with fields:

         RiseTime: 1.3502
    TransientTime: 16.2627
     SettlingTime: 16.2627
      SettlingMin: 0.9552
      SettlingMax: 1.2591
        Overshoot: 25.9069
       Undershoot: 0
             Peak: 1.2591
         PeakTime: 3.7764

Characteristic information of step response for elevation 2:
ans = 

  struct with fields:

         RiseTime: 7.5014
    TransientTime: 9.7511
     SettlingTime: 9.7511
      SettlingMin: 0.9001
      SettlingMax: 1.0008
        Overshoot: 0.0822
       Undershoot: 0
             Peak: 1.0008
         PeakTime: 14.0644

Characteristic information of step response for elevation 3:
ans = 

  struct with fields:

         RiseTime: 5.1223
    TransientTime: 8.7398
     SettlingTime: 8.7398
      SettlingMin: 0.9068
      SettlingMax: 0.9992
        Overshoot: 0
       Undershoot: 0
             Peak: 0.9992
         PeakTime: 13.7180

</pre>
<h2 id="8">Question 6</h2>
<pre class="codeinput">
<span class="comment">%load elevationData1.mat</span>
<span class="comment">%load elevationData2.mat</span>
<span class="comment">%load elevationData3.mat</span>

time = elev1(1, 1:end);

<span class="comment">% Elevation 1</span>
figure (11)
hold <span class="string">on</span>
plot(CV1.time, CV1.signals(1).values)
plot(CV1.time, CV1.signals(2).values)
plot(CV1.time, CV1.signals(3).values)
hold <span class="string">off</span>
title(<span class="string">'Gain Voltage of Elevation 1'</span>)
xlabel(<span class="string">'Time (s)'</span>)
ylabel(<span class="string">'Voltage (V)'</span>)

<span class="comment">% Elelvation 2</span>
figure (12)
hold <span class="string">on</span>
plot(CV2.time, CV2.signals(1).values)
plot(CV2.time, CV2.signals(2).values)
plot(CV2.time, CV2.signals(3).values)
hold <span class="string">off</span>
title(<span class="string">'Gain Voltage of Elevation 2'</span>)
xlabel(<span class="string">'Time (s)'</span>)
ylabel(<span class="string">'Voltage (V)'</span>)

<span class="comment">% Elelvation 3</span>
figure (13)
hold <span class="string">on</span>
plot(CV3.time, CV3.signals(1).values)
plot(CV3.time, CV3.signals(2).values)
plot(CV3.time, CV3.signals(3).values)
hold <span class="string">off</span>
title(<span class="string">'Gain Voltage of Elevation 3'</span>)
xlabel(<span class="string">'Time (s)'</span>)
ylabel(<span class="string">'Voltage (V)'</span>)
</pre>
<img vspace="5" hspace="5" src="AER715_Lab4_SYDM_11.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_12.png" alt=""> <img vspace="5" hspace="5" src="AER715_Lab4_SYDM_13.png" alt=""> <p class="footer">
<br>
<a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2024a</a>
<br>
</p>
</div>
<!--
##### SOURCE BEGIN #####
%% Lab Exercises –
clc;

%% Constants for Heli 4
Mh = 1.450; % Mass of Heli Body (kg)
Mc = 1.918; % Mass of CW (kg)
La = 25.75/39.37; % Distance from Pivot to Helecopter body center (m)
Lb = 18.5/39.37; % Distance from Pivot to conterweight center (m)
Lh = 6.933; % Distance from pitch axis to rotor center (m)
Kf = 0.140; % Motor-Prop Force Constant (N/V)
Krt = 0.0027; % Motor-Prop Torque Constant (Nm/V)
epsilon = -26:1:30; % Elevation Range (Deg)
epsilon_0 = -25.75; % Elevation Start (Deg)
lambda = 0:1:360; % Travel Range (Deg)
g = 9.81; % Gravity constant (m/s^2)
Wh = Mh*g; % Weight of Heli Body (N)
Wc = Mc*g; % Weight of CW (N)

Je = (Mh * La^2) + (Mc * Lb^2) % Elevation Axis (kg-m^2)

% Open loop transfer function
G4_elev1 = tf(La*Kf, [Je, 0, 0])
G4_elev2 = tf(0.0294, [1.0000, 0.1538, 1.3288])
G4_elev3 = tf(0.0911, [1.0000, 3.1682, 1.7900, 4.0932])
G4_trav = tf(0.002362, [1 0 0])

% Closed loop transfer function
T = tf(La*Kf, [Je, 0, 0] + La*Kf)

% Load Sisotool data
 sisotool('SisoElev1.mat') % originaly sisotool('rlocus', G4_elev1)
 sisotool('SisoElev2.mat') % originaly sisotool('rlocus', G4_elev2)
 sisotool('SisoElev3.mat') % originaly sisotool('rlocus', G4_elev3)
 sisotool('Trav.mat') % originaly sisotool('rlocus', G4_trav)

%% Question 1
% Root Locus and Step Response for Elevation 1
figure(1)
image(imread("Elev1RL.png"))
axis off

figure(2)
image(imread("Elev1SR.png"))
axis off

% Root Locus and Step Response for Elevation 2
figure(3)
image(imread("Elev2RL.png"))
axis off

figure(4)
image(imread("Elev2SR.png"))
axis off

% Root Locus and Step Response for Elevation 3
figure(5)
image(imread("Elev3RL.png"))
axis off

figure(6)
image(imread("Elev3SR.png"))
axis off

figure(7)
image(imread("TravRL.png"))
axis off

figure(8)
image(imread("TravSR.png"))
axis off

%% Question 2
% Tranfer functions
G4_elev1 = tf(La*Kf, [Je, 0, 0])
G4_elev2 = tf(0.0294, [1.0000, 0.1538, 1.3288])
G4_elev3 = tf(0.0911, [1.0000, 3.1682, 1.7900, 4.0932])
G4_trav = tf(0.002362, [1 0 0])

% PID gain values of each tranfer function
PID1 = pid(C1)
PID2 = pid(C2)
PID3 = pid(C3)
PID_Trav = pid(C_Trav)

%% Question 3
% Comlete closed loop transfer function
feedback_elev1 = feedback(G4_elev1*PID1, 1)
feedback_elev2 = feedback(G4_elev2*PID2, 1)
feedback_elev3 = feedback(G4_elev3*PID3, 1)
feedback_trav = feedback(G4_trav*PID_Trav, 1)

%% Question 4
% Step response for elevation
figure(9)
step(feedback_elev1, feedback_elev2, feedback_elev3)
title('Step Response of Elevation')

% Step response of travel
figure(10)
step(feedback_trav)
title('Step Response of Travel')

%% Question 5
fprintf('Characteristic information of step response for elevation 1:')
stepinfo(feedback_elev1)

fprintf('Characteristic information of step response for elevation 2:')
stepinfo(feedback_elev2)

fprintf('Characteristic information of step response for elevation 3:')
stepinfo(feedback_elev3)

%% Question 6
%load elevationData1.mat
%load elevationData2.mat
%load elevationData3.mat

time = elev1(1, 1:end);

% Elevation 1
figure (11)
hold on
plot(CV1.time, CV1.signals(1).values)
plot(CV1.time, CV1.signals(2).values)
plot(CV1.time, CV1.signals(3).values)
hold off
title('Gain Voltage of Elevation 1')
xlabel('Time (s)')
ylabel('Voltage (V)')

% Elelvation 2
figure (12)
hold on
plot(CV2.time, CV2.signals(1).values)
plot(CV2.time, CV2.signals(2).values)
plot(CV2.time, CV2.signals(3).values)
hold off
title('Gain Voltage of Elevation 2')
xlabel('Time (s)')
ylabel('Voltage (V)')

% Elelvation 3
figure (13)
hold on
plot(CV3.time, CV3.signals(1).values)
plot(CV3.time, CV3.signals(2).values)
plot(CV3.time, CV3.signals(3).values)
hold off
title('Gain Voltage of Elevation 3')
xlabel('Time (s)')
ylabel('Voltage (V)')
##### SOURCE END #####
-->
</body>
</html>
